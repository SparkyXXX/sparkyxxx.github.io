---
title: 深度学习python基础
description: 开发环境、基本语法和常用库
author: Hatrix
date: 2025-07-08 16:55:00 +0800
categories: [知识储备]
tags: [机器学习]
math: true
mermaid: true
pin: false
image:
  path: https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/20250708170226830.png
  alt: 深度学习基础
---

## 虚拟环境

安装的 python，主要包含了 Lib 库（包含标准库和 site-packages 第三方包存储位置）、Scripts（包含 pip.exe 包管理器）以及 python.exe 解释器；安装的时候还安装了 python 启动器（用于管理多个不同版本的 python）。虚拟环境即将上面的东西复制一份（一般情况下不含标准库，标准库通过符号链接或直接引用系统 python 安装路径下的标准库；但anaconda 出于环境隔离的考虑，会将标准库一并复制；以及会将解释器和包管理器统一放在 Scripts 路径下，主要是为了方便添加环境变量）。

虚拟环境本质上是对解释器、包管理器的一种隔离式复制；虚拟环境的激活和去激活就是在环境变量 Path 中添加或去除虚拟环境的解释器路径，相当于对安装位置默认的路径进行截胡。在虚拟环境下安装第三方库，就会安装到虚拟环境的路径下了。

## Anaconda使用

安装Anaconda后，终端或命令提示符会被修改为每次启动自动激活虚拟环境：

1. 调用 powershell.exe

2. 执行 conda shell.powershell hook
3. 通过 hook 输出的脚本定义 activate 命令
4. 自动执行 conda activate your-env
5. 显示 (your-env) 前缀

Anaconda Prompt 本质上是一个 CMD 命令行 + 初始化脚本。它启动时根据使用的shell调用不同的脚本，然后设置好 `PATH` 等环境变量，并激活 `(base)` 环境。

- `bash` 用 `conda.sh`
- `cmd` 用 `activate.bat`
- `powershell` 用 `conda-hook.ps1`

`base` 是 Anaconda 安装后默认创建的虚拟环境，为了让用户开箱即用，默认在终端启动时就激活 base 环境。如果不激活任何虚拟环境，就在操作系统本地的环境（也叫 "系统 Python" 或 "裸机环境"）中，容易造成 依赖污染、库版本冲突、难以迁移项目Denham问题，这正是虚拟环境存在的原因。

`conda activate` 是一个 shell 函数/脚本。实际效果如下

1. 修改 PATH 环境变量：把虚拟环境的 `Scripts/`、`Library/bin/` 加入 PATH
2. 设置一些环境变量：比如 `CONDA_DEFAULT_ENV`, `CONDA_PREFIX`
3. 切换 Python 可执行路径：让运行的 `python` 实际指向虚拟环境中的那个

## Python语法

1. “>”为大端序列，"<"为小端序列

2. 函数传参时如果按照顺序，是不用写参数名称的，反之则需要显式写出参数名

3. self相当于类当中的一个全局变量

    类里面，\_\_init\_\_首先把参数全读进来，以后\_\_init\_\_都用self.xxx而不用传入的参数

    \_\_call\_\_方法：用括号加参数，而不用方法+括号和方法的语法糖

4. 

## 常用包

1. np_array的图片是HWC（height，width，channel），用shape属性可以查看；cv.imread得到的是ndarray

2. os.system函数可以将字符串转化成命令在服务器上运行；其原理是每一条system函数执行时，其会创建一个子进程在系统上执行命令行，子进程的执行结果无法影响主进程。

3. argparse用于解析命令行参数，argparse使用主要有四个步骤：

    - 导入`argparse`包
    - 创建 `ArgumentParser()` 参数对象
    - 调用 `add_argument()` 方法往参数对象中添加参数
    - 使用 `parse_args()` 解析添加参数的参数对象，获得解析对象
    - 程序其他部分，当需要使用命令行参数时，使用`解析对象.参数`获取

    add_argument方法的参数

    - name or flags - 选项字符串的名字或者列表，例如 foo 或者 -f, --foo。
    - action - 命令行遇到参数时的动作，默认值是 store。如果在命令行中 加了这个参数，那么对应的变量值就会被设为 `True`；没写这个参数，则默认是 `False`
    - required - 可选参数是否可以省略 (仅针对可选参数)。

    通过在参数名前加`--`，设置为可选参数，如果未输入，则使用`default`默认值（若未设置`default`，则会默认赋值`None`）。通过将可选参数设置引用名，可以缩短参数名，简化命令行参数输入。

4. 

## Pytorch使用

1. 加载数据：pytorch中的数据主要是两个类型，一个是dataset，一个是dataloader。dataset提供一种获取数据及其labl并进行编号的方式，dataloader用于打包数据成batch并为后面的网络提供不同的数据形式。dataset实现的功能包括如何获取每一个数据及其label、提供数据总数。根据数据集的组织形式实现自己的dataset，包括\_\_init\_\_，\_\_getitem\_\_，\_\_len\_\_三个方法。
2. tensorboard可以画出训练损失图，可以查看数据集中的图片
3. transforms：对图片进行变换，Compose组合（传入transform列表）、ToTensor转为张量、Normalize归一化、Resize尺寸变化、CenterCrop中心裁剪。transforms相当于一个工具箱，使用之前需要先通过里面的类创建自己的工具，然后使用这个工具。



BA是优化相机参数和三维点坐标，使投影误差最小化的非线性优化算法

magick包

验证测试：渲染测试集和部分训练集图像、计算PSNR、L1等指标并写入tensorboard日志

保存模型会将当前模型的高斯参数保存为 `.ply` 文件（用于渲染、可视化、最终发布），通常用于导出可用于渲染或三维重建的结果。

保存 checkpoint（模型权重 + 当前迭代数），供以后恢复训练。防止训练中断后丢失全部进度以及允许从特定训练轮数恢复继续训练。
