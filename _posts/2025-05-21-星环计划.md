---
title: 星环计划
description: 四旋翼开发
author: Hatrix
date: 2025-05-21 22:10:00 +0800
categories: [知识储备]
tags: [机电系统]
math: true
mermaid: true
image:
  path: https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/UAV.jpg
  alt: 四旋翼无人机
---

## 概述

常见的小型飞行器主要分为固定翼飞行器、单旋翼直升机和多旋翼飞行器三类。固定翼飞行器的升力由机体线速度产生，不能垂直升降，结构简单，续航较长。旋翼飞行器的升力直接由螺旋桨提供，可以垂直升降；直升机通过总距操纵改变所有桨叶的几何迎角，控制直升机的垂直升降；通过周期变距操纵周期性改变各桨叶的迎角，产生不对称升力，控制直升机的前后左右倾斜和水平飞行方向。多旋翼飞行器结构对称，螺旋桨之间的反扭距可以相互抵消，通过多个螺旋桨产生拉力和三轴力矩(yaw/pitch/roll)。穿越机是轴距 330mm 以下的四旋翼的统称。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-21_22-56-06-removebg-preview.png)

DIY 一架多旋翼飞行器涉及的工程技术包括：地面站或遥控器与飞行器远距离通信、机载嵌入式处理器设计、实时操作系统的软件运行环境和接口提供、飞行控制算法、飞行器结构设计、多传感器数据融合和状态估计等。

## 硬件部件详解

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/20250706205504679.png)

多旋翼飞行器的硬件组成包括自驾仪系统(自驾仪、GPS 接收机)、动力系统(电机、电调、电池、螺旋桨)、遥控系统(遥控器、接收机)、机架系统(机身、机臂、起落架)。其中，电机电调电池、遥控器和接收机，在 RC 遥控车中也是核心部件，在原理、参数和选型上相通。

旋翼飞行器的机械结构设计相对简单，一块或数块碳板+铝柱+起落架就可以组成机架，也可以根据轴距参数买合适的现成机架，注意有的机架上配有焊盘或 xt 头等电气接口，根据需要选用即可。这里贴出高飞老师的超轻无人机作为一种结构参考。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/20250706205517737.png)

### 飞控/自驾仪

飞控即飞行控制器，硬件上就是一块嵌入式板卡，烧入写好的固件程序之后，负责运行飞控算法，根据飞行器位姿信息和遥控给定的控制量得出每个电机的期望转速，并输出电机推力的控制信号。固件是写入硬件设备非易失性存储器(如 Flash)中的底层软件，介于硬件和上层软件之间，负责直接控制硬件行为。飞控算法包括从传感器数据采集、姿态估计、导航到控制输出的整套模块。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/20250706205535173.png)

由于对实时性要求高，飞控上一般会运行 RTOS(实时操作系统)，如著名的开源飞控软件 PX4 就运行在轻量级 RTOS Nuttx 上。飞控和四合一电调用减震柱叠起来称为飞塔，也有的将两者集成在一块 PCB 上称为 aio(all in one)。科研无人机除飞控外，还会配备机载电脑作为算力平台，可提供诸如物体规避和碰撞预防等高级功能。两个系统通过快速串行或 IP 链路连接，通常使用 MAVLink 协议进行通信。

飞控板卡一般内置 IMU、气压计、磁罗盘(分别用于获得加速度、高度和朝向信息)，有 I2C、UART、CAN、GPS 等接口。电机的配套电调(esc)连接到 PWM 输出；外置传感器(GPS，指南针，距离传感器，气压计，光流计，气压计等)通过 I2C, SPI, CAN, UART 等连接接。有的飞控处理器分 FMU (飞行管理单元)处理器和 IO 处理器，前者为高性能处理器，专用于运行实时飞控算法，相应的 PWM 信号输出专用于控制核心动力系统或高精度执行器；后者为处理传感器输入和 PWM 输出的协处理器，相应的 PWM 输出用于控制舵机等非核心设备。大多二次开发的飞控系统，都是基于一个成熟的飞控，然后添加不同的传感器，并提供一个标准的控制接口。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-24_10-06-19-removebg-preview.png)

飞控的关键参数和接口包括：

- MCU 看主频和接口资源，主流的主控芯片包括 STM 系列的 F411(小尺寸飞机用，逐渐淘汰)、F405、F722、H745 或更高。也有国产的 AT32 系列，如重山航空的飞控。
- Uart 为串口数量，有多少串口就可以外接多少设备。
- Gyro 为陀螺仪型号，最经典的是 MPU6000(已停产)，目前主流为 BM270 和 42688。
- Receiver 为飞控支持的接收机协议。
- ESC signal 为支持的电调数量，即最多能控制多少电机。
- Input 为支持的最大电池电压。
- software 为飞控支持的固件。

其它辅助参数和接口还有：

- BEC 为降压模块。
- OSD 为处理画面参数用的芯片型号。
- 黑匣子用于存储飞机的各种参数，主要是存储飞行日志便于调试。
- BF LED 为传统的通过地面站设置 LED。
- wifi 是指支持无线调参还是必须使用 usb 线。
- VTX switch 是用遥控器关闭图传。
- TVS Protection 为防浪涌保护。
- Mounting 为安装孔位。
- VCC 焊盘是未经过 BEC 降压的原始电压。

### 遥控器和接收机

遥控系统将摇杆控制量发送给接收机，接收机处理后根据协议再发送给飞控。遥控器和接收机的通信使用无线传输技术，主流频段为 2.4GHz ISM。ISM 频段(Industrial, Scientific and Medical Band)是国际电信联盟(ITU)划分的免费开放频段。此外也有 72MHz 的工作频段，2.4GHz 的遥控距离更远、抗干扰能力更强，但绕射能力较差；72MHz 反之。

专用的模型(航模车模船模)遥控器有多个通道，通道是独立控制信号的传输路径，每个通道对应飞行器的一个可控维度(如油门、方向、姿态等)，简称几通。基本的控制通道包括油门(控制飞机垂直升降)、升降(俯仰)、方向(偏航)、副翼(横滚)，其余为自定义通道，可用于控制灯光、拉烟器、起落架等部件。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-24_10-41-52-removebg-preview.png)

接收机通过单条总线输出所有通道对应的 PWM 信号，脉宽一般在 1000us-2000us，可用于直接控制舵机、电调或输入飞控的 PWM 接口。接收机和飞控之间的通信协议常见有 PPM、SBUS 等。PPM 为脉冲位置调制，原理为将多个通道的控制信号编码为单一串行脉冲信号，每个脉冲的间隔对应不同通道的数值。PPM 结构简单成本低、抗干扰性较差，支持通道数一般小于 10。SBUS 为智能总线协议，基于 UART 将多通道信号编码为数字数据流，通过差分信号传输。SBUS 支持双向通信、有纠错机制、抗干扰性强、通道数灵活，适合长距离高干扰环境。其它的常见协议还有 CRSF、TBS、DSM、IBUS 等。

目前主流的专用遥控器品牌有天地飞、乐迪、RadioMaster 等。遥控器内一般会配备接收机，但不一定与选用的飞控兼容，可能需要单独选配接收机。

遥控器和地面站需要设置一致的飞行模式，其中新手最常用的三种模式包括：自稳模式(姿态控制)、定高模式(姿态和高度控制)、定点模式(姿态、高度和水平位置控制)。

### 螺旋桨

螺旋桨型号由四位数字描述，前两位数字表示直径，后两位数字表示螺距，单位均为英寸(1 英寸=25.4mm)。螺旋桨尺寸需根据飞行器的尺寸来确定。旋翼飞行器的尺寸用轴距，即机臂对角线的长度来衡量。螺距定义为螺旋桨在不能流动的介质中旋转一圈时前进的距离，是衡量螺旋桨推进效率和性能特性的重要参数(螺旋桨是一个扭曲的翼型结构，每个横截面有不同的攻角，螺距是指在 75%桨尖半径处的螺旋桨叶片剖面所形成的螺旋角度对应的理论前进距离)。桨叶数方面，二叶桨的效率略高于三叶桨，但最大拉力相同的条件下，二叶桨直径比三叶桨大，因此三叶桨虽然效率稍低，但可做到尺寸更小重量更轻，在某些情况下反而能延长续航时间。多旋翼飞行器的桨叶数一般为二叶或三叶，小型多旋翼飞行器多用三叶；四叶及以上很少见，只有在需要单位时间内推动更多空气，提供更大推力的工业级重载无人机和直升机中使用。螺旋桨的材料大多为 PC、ABS、PP、碳纤维、混合材料等。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-25_00-13-55-removebg-preview.png)

旋翼飞行器尺寸与机臂数和螺旋桨尺寸相关，设机臂数量$$n$$，机臂夹角$$\theta = \frac{360}{n}$$，机架半径$$R$$，螺旋桨半径$$r$$，则

$$
R = \frac{r}{\sin\frac{\theta}{2}}\\
R+r = 外接圆半径
$$

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/20250706205629306.png)

### 电机

旋翼飞行器上基本都是无刷直流电机(BLDC)，需要搭配电调使用。

电机有很多分类方式：一是分为直流电机和交流电机，移动机器人、遥控模型和小型电器上多用直流电机；工业机器人、大型设备上多用交流电机。二是分为是否内置伺服功能，移动机器人尤其是人形机器人用的关节电机，基本都是带伺服的，由电机本体、编码器、伺服驱动器和控制器构成，定位精度高、动态响应快；而遥控模型由于没有如此高精度的需求，多用不带伺服的电机。三是分为有刷电机和无刷电机。“刷”是电机中的碳刷，用作机械换向器，在转子转过一定角度后改变绕组电流方向，以保持电机朝一个方向连续旋转。有刷和无刷严格来说是直流电机下的分类，电流换向是电机保证超一个方向连续旋转的必要操作，直流有刷电机通过碳刷实现，直流无刷电机通过电调作为电子换向器来实现，交流电机本身的交流电产生的旋转磁场可以实现换向，也无需碳刷。有刷电机有两根出线，可以不通过电调直接驱动，优点是结构简单便宜，直流电压控制速度变速顺滑平稳，低速线性好，启动扭矩大，缺点是有碳刷损耗，噪声较大，最大转速相对较小。无刷电机换向通过电调中的控制电路来完成，优点是无碳刷，除了轴承外免维护，噪音小，运行效率高，同尺寸下功率相对大，散热性能好。旋翼飞行器多用无刷直流电机，而 RC 遥控车中有刷无刷都有。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/20250706205639893.png)

无刷电机又细分为有感无刷和无感无刷，有感无刷的感即指霍尔传感器，靠霍尔传感器加控制器来检测转子永磁体位置，最大的优点是可以保证极低转速的同时保有大扭矩，高速性能也强于有刷电机和无感无刷电机，尤其是带 FOC 电调的，但价格相对高，相对较重，且防水性能差。无感无刷没有霍尔传感器，通过反电动势和脉冲定位法检测转子位置，相对较轻且价格相对低，缺点是低速和满负载时由于难以确定转子位置，启动时电机容易抖动，启动线性差，启动扭矩小。

说回旋翼飞行器所用的无刷直流电机，又可细分为内转子和外转子两种。内转子电机的轴连着线圈转，外壳不转，转速相对更高；外转子电机的线圈不转外壳转，扭矩相对更大。外转子电机转动时力臂较长整体扭矩较大，控制细腻但由于转动惯量大故极速相对低，低速线性好，动力水平相同是重量相对轻。缺点是不防水不防尘不耐脏。航模中基本都是外转子电机，而车模中则以内转子居多。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-24_16-09-44-removebg-preview.png)

遥控模型使用的无刷直流电机有两个关键参数，一是 KV 值，二是电机后的四位数字编号，代表定子尺寸。KV 值代表电机空载时，每增加 1V 电压所增加的转速(单位为 rpm )，空载转速为 KV 值与供电电压的乘积。KV 值越低，铜线越细，绕的匝数越多，反之亦然。KV 值高表示高速小扭矩，KV 值低表示低速大扭矩。四位数字编号中前两位代表定子直径，后两位代表定子长度，单位均为 mm。电机尺寸越大，能提供的转速越大，相应的升力也就越大($$F=kn^2$$)，能带动的飞机重量就越大。而在相同 KV 值下，定子体积越小扭矩越大。相同体积下，高瘦的电机更省电、反应更灵敏，但散热较差；宽扁的电机反之。

$$
\begin{aligned}
T&=Fr=\frac{B^{2}\pi r^{2} h}{\mu_{0}}\\
\dot{\omega}&=\frac{T_{\text{res}}}{M} \quad T_\text{res}为反扭矩，M为转动惯量\\
M&=\rho 2\pi rht r^{2} \quad \rho为磁铁和磁通环密度，h为圆柱壳厚度
\end{aligned}
$$

电机工作在低转速下的能耗更小力效更高，焦耳损耗较大，高转速反之。力效为拉力与功率的比值，反映了电机产出拉力的效率，数值越大效率越高。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-24_16-11-37-removebg-preview.png)

电机以及螺旋桨的尺寸要与旋翼飞行器整体尺寸相匹配，一般来说，三寸机选择 1106 等型号，五寸机选 2204、2207、2306 等型号(三寸和五寸都是指螺旋桨尺寸，且单位是英寸)。因此，选择电机优先考虑尺寸，其次考虑 KV 值。平稳飞行的飞机选低 KV，竞速飞机选高 KV。同时，选 KV 值需要考虑电池的放电倍率，也就是 C 数。C 数乘以容量为电流，所有电机最大电流之和需要小于电池的放电电流，否则电机性能会受电池制约。另外，电机输出轴的轴径有 1.5mm 和 5mm 之分，桨叶的孔位需要与之适配。目前主流的飞行器电机品牌有 T-Motor 的 F60 系列，乘风系列，致盈动力，银燕，双飞等。

在使用过程中，电机要注意散热，过热的电机效率会显著降低，且容易使得内部的永磁体超过居里点而对其磁性产生永久不可逆的影响。在车模中常单独加散热风扇或使用硅脂导热到金属底盘上，飞行器中空气流动大大提高了散热性能，在选配正确的前提下基本不用担心这个问题。

### 电调

电调全称电子调速器(ESC)，分为有刷电调和无刷电调两种，无刷又分为有感无刷和无感无刷，还可以分为单相电调和双向电调，车模通常都是双向电调，航模通常都是单向电调。有感无刷和无感无刷的区别在于电流检测的实现方式不同，有感无刷直接使用电流传感器检测，而无感无刷则无需额外传感器，利用母线采样电路和算法实现估算电流。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-24_20-57-08-removebg-preview.png)

旋翼飞行器基本都是无刷直流电机，相应地使用无刷电调，其核心功能是将直流电转换为三相交流电，驱动无刷电机。由于无刷电机没有电刷作为机械换向器，因此需要逆变器作为电子换向器产生旋转磁场，来驱动永磁体转子旋转，输出的信号为 PWM 调制的三相方波或正弦波。另外，更换三相线的相序可以改变旋转磁场的旋转方向，因此可以改变电机的旋转方向。

电调调速的逻辑为，根据飞控发来的期望转速，由算法计算出输出 PWM 的占空比。等效的直流电压通过电流作用到电机上，电机产生相应的转速，转速产生相应的反电势，对应于一定的电流，电流产生电磁转矩，与负载转矩平衡，是一个动态调节平衡的过程。另外，实际电流受限于电调最大电流规格，超过阈值时会触发电调保护。

$$
\begin{aligned}
n &= U\times \text{KV值}\\
E &= K_e n\\
I &= \frac{U-E}{R}\\
T_e &= K_t I\\
\end{aligned}
$$

具体来说，电调需要实现的功能有电源输入滤波、MOSFET 三相全桥逆变、PWM/DShot 信号解码、霍尔传感器或无感测反电势检测转子位置，触发 MOSFET 开关进行换向以控制绕组通电顺序、过流过温低压保护等。一块典型的电调板包括 MCU(运行换向算法、协议解码等)、三相全桥、MOSFET 驱动芯片(放大 MCU 的 PWM 信号以驱动 MOSFET)、电源模块(降压后为 MCU 供电)、电流采样(采样电阻、运放等)。MOSFET 的驱动方式有六步换向法和 FOC，前者由方波驱动，后者由正弦波驱动。目前主流的高端电调多为 FOC 控制，有转矩平滑，噪音低，效率高等优势，适合需要精密控制的应用。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-24_21-00-10-removebg-preview.png)

电调有四合一电调和分体电调，电调最主要的参数是额定电流，代表室温下允许持续通过的最大电流，决定了能带的动多大的电机，需要综合考虑电机最大电流和电池放电倍率选择，可大不可小，一般取稍大于(1.2 倍左右)，避免持续的峰值工况。比较科学的选择顺序是先电机再电调最后电池。对于电压，电调上一般会标注推荐的电压，电压过低电调不会启动，电压过高在没有超压保护的情况下可能会烧掉电调。过热、堵转、电机电调不匹配(电机要求大于电调提供)、超过标称电压的电池、环境温度过高等都可能烧毁电调。有的电调内部含有降压模块并引出一路低压输出(BEC 输出)给其它低压设备供电，BEC 输出不受电池电压影响。有的还含有高压 BEC 输出，主要用于提升舵机性能(有的舵机性能在低压和高压供电下有显著差别)。

电调中一般有预先烧录好的固件程序，决定了如何解析飞控指令、如何控制 MOSFET 开关时序等。BLHeil32 是专为无刷电调设计的开源固件，针对 32 位微控制器(STM32、CW32)作了优化，支持更高的 PWM 频率，具备双向 DShot 协议、自适应进角、动态刹车等功能，通过更精细的换向算法降低了电机损耗。飞控通过 PWM 或 DShot 向电调传输数据。DShot 为取代传统 PWM 模拟信号的数字通信协议，将油门值编码为 16 位数字信号，通过高低电平脉宽表示 0/1，DShot 后面的数字代表协议传输速率。自适应进角的作用是根据转速动态调整换向时机，补偿电机电感延迟，提升高速下的电机扭矩和效率，减少发热，尤其适合高 KV 值电机在高转速场景的应用。目前主流的电调品牌包括：好盈、银燕、T-motor 等。

### 电池

遥控模型用的电池为了追求更大的放电倍率，都是由放电能力很强的电芯组成的锂聚合物电池，往往也没有任何的保护电路。一组标准电芯称为 1S，其额定电压值为 3.7V，电芯之间串联提升电压、并联增加容量。电池的主要参数包括：几 S 几 P、放电倍率和充电倍率(用 C 数衡量)、容量(以 mah 为单位)。S 数表示电池由几组电芯串联而成，P 数表示构成单组电芯的单片电芯数。例如，如果一组电芯由单片电芯组成，就称之为 1P；如果这个 1S 电芯由两块单片电芯并联增容而成，就称为 2P。P 数越小稳定性越好。C 数代表放电能力，越大越好，C 数与容量的乘积就是支持的最大放电电流，需要跟电机电调相匹配才能发挥最大效果。充电倍率会小于放电倍率。电池容量代表在一定电流下用多少时间可以放完电。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/20250706205736523.png)

电池上有供电口和平衡头两个插口。常见的供电口插头种类有 JST、T 插、XT30/60/90、EC5、田宫，也有各种插头规格之间的转接头；但不同的插头匹配不同的电流强度，从低到高分别是 JST、T 插、XT60、XT90，因此使用转接头时要注意转接头的电流承受能力。平衡头可以让充电器知道电芯数量并可以分别检测每个电芯电压，充电时可以动态调整，用于确保电池中的每一个 1S 电池单体的充放状态一致，避免电压不均衡对电池造成损伤。平衡头导线有公共的负极，每一个 1S 电池有一根正极。另外，平衡头导线较细，只用于充电。电池品牌方面，选格氏的即可。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/20250706205751613.png)

平衡充电器的原理是通过供电口输入大电流，再通过平衡充调整电芯间的压差；充电时要将供电口和平衡头同时接上，后选择对应的电池种类、电压和电流。平衡充有经典便宜的 B6 或 B6AC(B6AC 就是 B6 加内置电源，正版的有 SKYRC 标识)，也有智能高级的 HOTA D6pro 等。选择充电器时需要确定充电器是内置电源还是需要额外电源，很多充电器需要配备额外的直流开关电源来供电，而开关电源只推荐有电工经验的使用，需要注意接线方式。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-24_22-14-44-removebg-preview.png)

除了普通的锂电池外，还可能接触到两种电池：高压电池和电包。高压电池标有 hv4.35V，因为材料不同，比常规 4.2V 锂电池更小更轻，并且从理论上讲，高压锂电池对的容量可提升 10%-15%。电包一般使用磷酸铁锂电池 LiFe，电压为 3.2V，充满电压为 3.65V。电包主要的优势是安全性较高，相当于一个慢放电的、大容量的、专门给电池充电的充电宝，用于外场。

![](https://cdn.jsdelivr.net/gh/SparkyXXX/Hatrix-s-Blog-Image/img/Snipaste_2025-05-24_22-20-15-removebg-preview.png)

电池内部原理简单叙述如下：外侧电子数量决定电池容量，想要抛弃外层电子的倾向决定电压。过充或过放会对集流体的金属(正极铝箔负极铜箔)产生一些不良反应，过充负极析出锂，过放正极析出铜，产生的锂枝晶或铜枝晶可能刺穿隔膜导致电池内部短路，引起一系列的产气反应甚至是电池的热失控和爆炸。锂电池中核心反应是氧化还原反应和嵌入脱嵌反应。电池有呼吸效应，一方面指电池的嵌入脱嵌反应相对电流的速度是滞后的，另一方面也指电池内部存在微量的气体产生和消失。电池外部有热塑膜包覆，起到防尘和保护的作用。另外，电池内阻越低，放电效率越高，不良的使用会增加电池内阻。

在电池使用方面，最重要的是遵循三条原则：

1. **电池不能在无人值守的情况下充电**
2. **使用时需要确保电池总电压在设备额定电压以下**
3. **使用后断开供电头，不要过充过放**

电池的保养是一项比较麻烦的工作。单组电芯电压需要控制在 3.5-4.2V 之间，不要出现过充过放，否则会对电池造成不可逆的损伤，严重影响电池寿命。现代主流的平衡充电器一般带有过充检测，超过阈值后会自动断开；因此使用时一般注意不要过放即可，可在使用时给平衡头插上低压报警器(俗称 BB 响)，并将低压保护阈值设置在 3.5-3.6V。过放时，平衡充电器无法识别出锂电池，如果不是多次过放，可以使用平衡充电器的镍氢电池模式进行强制充电，充到单电芯电压达到 3V 左右可以被识别了，换成锂电池平衡充的模式继续充电。注意镍氢电池没有放过充的功能，充到可以识别之后一定要换成锂电池模式。充电方面，充电电流越大，充电速度越快，对电池越不好。电池会标注最大充电倍率，以 1500mah，最大 5C 充电为例，则最大支持的充电电流为 7.5A。一般来说，充电倍率的标注会低于放电倍率，但实际上正规的电池都支持 5A 的充电。

电池容量和电压之间的大致关系如下

| 剩余容量 (%) | 开路电压 (V) |
| ------------ | ------------ |
| 100%         | 4.20         |
| 90%          | 4.06         |
| 80%          | 3.98         |
| 70%          | 3.92         |
| 60%          | 3.87         |
| 50%          | 3.82         |
| 40%          | 3.79         |
| 30%          | 3.77         |
| 20%          | 3.74         |
| 10%          | 3.68         |
| 5%           | 3.45         |
| 0%           | 3.00         |

电池储存方面，电池电压需要充放到一个合适储存的值，短期储存在 3.8V-3.85V，长期存储在 3.9V，且储存期间三个月充放电一次，否则电池容易鼓包，影响寿命甚至报废。电池在长期不用的前提下，负极的 SEI 膜会发生溶解和二次沉积，致密程度降低，使得电解液和负极材料直接接触，电解液和负极材料中的锂离子发生产气反应。大 C 数的电池由于充放电倍率高，内部化学反应更剧烈，离子迁移速度更快，更容易发生产气和析晶反应。长期满电或亏电保存也会导致和过充过放类似的危害。长期保存时建议把电池电压保存在 3.9V，电量保持在 50%左右，内部锂离子和电解液浓度相对平衡，一般的电池在使用后建议 1~2 天内将电压充回保持电压，100C 以上建议满电或亏电时间不要超过 24h。长期不使用的电池再次使用后建议经过一个充放电循环后再去储存电压保存。充放电可以保养 SEI 膜。使用后断开电池插头防止自放电，因为电容不受开关控制。

评价电池好坏可以看充放电后每块电芯其电压的一致性，优秀的电池能做到 0.01V 级的压差。实际充放电的容量是否符合标称容量，从 3.6V 到 4.2V 能充进多少电量，和标称容量相差多少，一般能充电到标称容量的 90%及以上。充满电后保持状态，静置的自放电率，优秀的电池自放电率每个月在 1%到 2%。测试电池内阻(测欧姆内阻，忽略极化内阻)，优秀电池单组电芯内阻在 1~2mΩ，4mΩ 属于正常，6mΩ 属于偏高，10mΩ 则较差。内阻在一定程度上受使用温度和充电电量的影响。

### 舵机

舵机是一个带角度传感器和控制板的直流电机。给舵机通电时，pwm 信号控制内部的直流电机旋转。舵机内一般含有四组减速齿轮，顶部的花键齿轮连接舵机臂。舵机内部有电位器用于检测角度用作反馈(电位器转轴固定在输出轴上)。舵机按照齿轮分为标准舵机、短身舵机、大舵机和微型舵机。按照控制信号分为数字舵机和模拟舵机，数字舵机的控制频率更高精度更高更贵，模拟舵机控制频率低(50Hz，精度更低更便宜)。数字舵机通过磁编码控制，模拟舵机通过电位器控制。金属的外壳和金属上盖是很有必要的选择。舵机内的电机将细铜线缠绕成极细的中空圆柱体，形成一个极轻的无极中空转子并将磁铁置于圆柱体内，形成空心杯马达。标准舵机基本用的是无刷电机，体积较大，微型舵机用的是便宜的铁芯电机，高性能的电机用的是空心杯电机。

舵机齿轮的材质强度有碳钢、合金钢、铜等非常多选择，加工工艺和热加工方式也多种多样，以应对不同工况。塑料齿轮相应速度快扭矩要求小，齿轮强度低，便宜。黄铜齿轮强度中等重量最重响应速度最慢，价格便宜，由黄铜粉末烧结而成。钢制齿轮强度最高，重量中等，价格较贵。铝制齿轮强度次高，重量较轻响应速度快，价格较贵。齿轮的啮合存在缝隙，有小的虚位/空程。

舵机臂分为锥形、一字形和盘形，盘形用于控制差速锁的锁止，另外两种一段连接舵机输出轴，另一端连接转向拉杆。由于需要往复转动，舵机臂两端地固定孔位都需要适当打螺丝胶。

## 标准件介绍

标准件是指结构、尺寸、画法、标记等各个方面已经完全标准化，并由专业厂生产的常用的零(部)件，包括标准化的紧固件、连结件、传动件、密封件、液压元件、气动元件等机械零件，常用标准有 GB 和 ISO 等。常见的有螺丝螺母、垫片垫柱、齿轮齿条、链轮链条、带轮和带、轴承、铰链、弹簧等。直接传动方式主要有齿轮传动，链传动，带传动，滑动丝杠传动、滚珠丝杠传动，摩擦传动，连杆传动。

螺丝螺母：

- 经典的杯头内六角螺栓，如 M3\*8 表示米制单位公称直径 3mm，去帽后的纯螺杆长度 8mm，旋向为顺进逆出。性能等级在螺帽上会有标注，从 3.6 到 12.9 有八个，数字越大越好。
- 螺纹分全螺纹和半螺纹两种，全螺纹圈数多间距密，作用圈数多，拧入速度慢用时久，阻力大扭矩大更牢固，对材料的剪切力和正前方的推力更大。半螺纹圈数少也叫快丝，特点相反。部分螺杆无螺纹的叫半牙(相对应的叫全牙)，以减少对上层材料的破坏，常对应上层材料的厚度。塞打螺栓和半牙螺栓类似也有光轴和螺杆部分，但受力方式不同，可用于运动部分的连接如轴承垫片等，前面的螺栓部分刚好够防松螺母作用。
- 螺母分普通螺母和防松螺母，防松螺母中带有尼龙(一种工程塑料)或金属的摩擦环，一定程度上可以抗振动带来的松动。
- 螺栓固定两种常用方式：螺栓+防松螺母，螺栓长度必须略超出螺母以保证放松效果；螺栓+弹簧垫圈+普通螺纹，效果略差于前一种方式。盲孔连接需在图纸中确认螺纹孔的深度，贯穿孔在不与其它结构干涉时，螺栓可适当超过螺母。

垫片垫柱：

- 垫片有弹簧垫和平垫之分，螺母之上依次放弹簧垫和平垫，平垫增大受力面积，弹簧垫用于防松加大预紧力，命名规则为内径*外径*厚度，用于垫高高度，增大受力面积，一定程度上可以起到轴承的作用
- 垫柱常用的包括铜柱、铝柱、尼龙柱、ABS 隔离柱；铜柱有单通和双通，长度指不包含螺纹的部分，为六边形；铝柱多为圆柱形；尼龙柱不导电；ABS 隔离柱也不导电但内部无螺纹。

齿轮齿条：

- 优点是传递动力大速度快功率高，传动比大传动位置精确；缺点是安装精度要求较高且金属齿轮质量大
- 常见的齿轮传动有齿轮-齿轮、齿轮-齿条、蜗轮-蜗杆等，齿轮传动系统的设计是一门学问，有必要建议去看专业的资料，此处只作零件层面的基本扫盲
- 最常用的参数是模数和齿数，模数代表齿轮大小，也是确保不同齿轮间能够啮合的标准，齿数代表其传递运动和动力的比例，由模数和齿数便可以确定齿轮的分度圆，从而确定齿轮的大小。常见的齿轮都是渐开线齿轮，其具有诸多制造加工和成本上的优点而得到广泛应用，渐开线是指齿轮齿形中齿廓的部分

链轮链条：

- 特点是制造和安装精度要求低，径向力小，有一定减震和缓冲能力，多齿同时啮合承载能力强
- 链传动减震和缓冲能力来自于链的挠性单元，但同时也导致瞬时传动比不恒定且磨损严重，不适于高速变载荷的场景

带轮和带：

- 带传动靠带轮上的柔性张紧带进行运动和动力的传递，分为靠摩擦力的摩擦型带传动(包括平带传动、V 带传动、多楔带传动)和靠带轮上的齿相互啮合的同步带传动。
- 同步带传动中，带和带轮的接触面做成相匹配的齿形，具有传动比精确传动平稳(相对于链轮)，效率高噪音低，可用于高速传动；中心距允许范围大，可用于长距离传动；相对于摩擦型带传动，啮合型带传动径向压力较小；具有弹性和挠性，可承受一定冲击，且不需润滑等优点
- 同步带的带齿材料分为聚氨酯(PU)和氯丁橡胶两大类。PU 带耐磨性好，耐水性和高低温性能差，用于常温情况；橡胶带挠性和耐水性好。
- 同步带的参数是齿距、宽度和长度。常见的标准有 HTD、GT 等，以 HTD-8M 为例，表示齿距为 8mm；其它的标准或型号还有 MXL、XL、L、XH、H 等；可以根据工况的转速和额定功率选择同步带轮的齿距。
- 同步带变形严重会导致啮合失效，需要换掉整条同步带

轴承：

- 轴承用于转动副，可减轻摩擦使旋转更顺畅，且对旋转轴有支持作用保证其在正确位置。轴承由内圈外圈滚动体保持架组成。轴承分金属密封型、橡胶密封性和开放型。
- 深沟球轴承是最具代表性的滚动轴承，主要承受径向载荷并可承受少量轴向载荷；与同尺寸其它类型的轴承相比，摩擦系数小、极限转速高、结构简单、制造和维护成本低精度高、尺寸范围大形式多。法兰轴承也是深沟球轴承，自带的法兰具有轴向定位功能，可以简化机体结构
- 推力球轴承只能承受轴向力，由座圈、轴圈和钢球保持架构成，两圈内径不同，内径大的松圈与轴承座(固定部分)配合，内径小的紧圈与轴(转动部分)配合；一般用单向推力球轴承。装配前需要为滚动体部分上油。
- 角接触球轴承可同时受径向力和双面的轴向力，外形与深沟球轴承类似但轴向两端略大
- 鱼眼轴承又叫杆端关节轴承，有内螺纹和外螺纹两种；鱼眼轴承工作中可产生自润滑，用于速度较低的摆动运动和低速旋转并可在一定角度范围内作倾斜运动，在支撑轴与轴壳孔不同心度较大时仍能正常工作。
- 滚子轴承是一种圆柱形滚动体轴承，可以保持每个部分的精准定位，滚子与环面之间形成线性接触，相较于点接触的滚珠轴承，载荷能力更强。

## 参考资料

[多旋翼飞行器设计与控制实践](https://rflysim.com/doc/zh/C/2.Multicopter_Practice.html?q=)

[Fast-Lab 无人机教程](https://www.shenlanxueyuan.com/course/730/task/29085/show)

[FPV 博主](https://www.youtube.com/@ChrisRosser/videos)

[PX4 自驾仪指南](https://docs.px4.io/main/zh/)

[PX4 系统架构](https://zhuanlan.zhihu.com/p/644265757)

[飞控接口解释](https://www.bilibili.com/video/BV1wV4y1X7W1/?vd_source=1d0891b41fe4e23dbf197eaf61dfa468)

[无刷电机原理和构造](https://www.bilibili.com/video/BV1bMVBzBECG/?vd_source=1d0891b41fe4e23dbf197eaf61dfa468)

[穿越机电机选择](https://www.bilibili.com/video/BV1Wk4y1i7i1/?vd_source=1d0891b41fe4e23dbf197eaf61dfa468)

[无刷电机和电调工作原理](https://www.yiboard.com/forum.php?mod=viewthread&tid=1214)

[吃透 SVPWM](https://zhuanlan.zhihu.com/p/414721065)

[FOC 和 SVPWM](https://zhuanlan.zhihu.com/p/147659820)

[锂电池平衡充使用](https://www.bilibili.com/video/BV1EP4y1473q/?vd_source=1d0891b41fe4e23dbf197eaf61dfa468)

[锂电池深度解析](https://www.bilibili.com/video/BV1pm41117ZN/?vd_source=1d0891b41fe4e23dbf197eaf61dfa468)
