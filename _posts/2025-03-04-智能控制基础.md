---
title: 智能控制基础
description: 课程笔记
author: Hatrix
date: 2025-03-04 15:20:00 +0800
categories: [控制原理]
tags: [课程笔记]
math: true
mermaid: true
---

## 第一部分 概述

60%开卷考试+40%作业出勤，作业在 i 北理提交

课程内容：概述、知识工程基础、分级递阶控制、遗传算法、神经网络、模糊控制、专家控制

### 控制理论发展

控制理论的发展大致分为三个阶段：经典控制(微分方程模型，传递函数、SISO、频域分析)——现代控制(卡尔曼的状态空间模型，状态方程，MIMO，时域分析)——智能控制。

- 经典控制：线性定常系统、SISO、传递函数/频域、反馈控制(PID 控制)、调节器
- 现代控制：线性/具有一定非线性/分布参数系统、MIMO、状态空间法/时域、卡尔曼滤波、极大值原理、动态规划、最优/随机/自适应
- 智能控制：复杂非线性系统(模型差或无模型)、大系统理论、智能算子/多级控制、智能机器

经典控制和现代控制都是模型驱动范式，需要经历建模、收集数据、参数估计，然后基于模型设计控制器，又叫间接数据驱动；而智能控制是数据驱动范式，直接从收集的数据里设计控制器，又叫直接数据驱动(比如强化学习就是无模型的控制，无模型的优化，典型的直接数据启动。

控制系统的$$SPACE^3$$模型：

![image-20250225172047352](../assets/post-pics/image-20250225172047352.png)

### 智能控制的定义

智能控制是应用人工智能的理论与技术和运筹学的优化方法，并将其同控制理论方法与技术相结合，在未知环境下，仿效自然智能，实现对系统的控制。

### 智能控制的三元论和二元论

三元论：人工智能 AI、自动控制 AC、运筹学 OR

二元论：控制理论、人工智能

### 智能控制的研究对象

智能控制的主要研究对象是各种大规模的复杂系统。

传统控制：模型论(不精确模型+固定控制算法)，缺乏灵活性和应变能力，难以控制复杂系统

智能控制：控制论(控制理论+人工智能)，改变控制策略去适应对象的复杂性和不确定性

#### 智能控制系统的主要功能特征

学习能力、适应性、容错性、鲁棒性、组织功能、实时性、人机协作

### 智能控制系统分类

按系统构成原理分类：学习控制系统、分级递阶智能控制系统、专家控制系统、模糊控制系统、神经网络控制系统、基于规则的仿人智能控制系统、集成智能控制系统、组合智能控制系统

按系统结构分类：直接智能控制系统、间接智能控制系统、分级递阶智能控制系统、集散智能控制系统(DCS)

按系统实现功能分类：智能自适应控制系统、智能自组织控制系统、智能自学习控制系统、智能自修复控制系统

## 第二章 智能控制的知识工程基础

智能控制的核心任务：对实际环境或过程进行组织，即规划和决策，实现广义问题求解。

智能控制研究需采用的相关技术：符号信息处理、启发式程序设计、知识表示、自动推理、机器学习和决策。

### 知识表示

![image-20250325020657153](../assets/post-pics/image-20250325020657153.png)

#### 状态空间表示法

状态：描述某些事物中各不同事物间的差异，而引入的一种最小变量的有序组合。

操作：能够引起状态中某些分量发生变化，从而使一个状态转移为另一个状态。

状态空间：描述全部可能状态及其相互关系的三重序元。S 是事物可能的初始状态集合、F 是操作集合、G 是可能的目标状态集合。

用有向图来表示状态空间的方式称为状态空间图示法：

- 把状态集合映射为节点集合
- 操作所引起的状态转移映射为标注该操作的有向边
- 问题求解通过操作从初始节点到目标节点，寻找一条有效的路径

![image-20250304165910890](../assets/post-pics/image-20250304165910890.png)

#### 一阶谓词解释法

取值为真或假的句子(Clause)称为命题(Proposition)，可分为谓词(Predicate)和个体(Individual)两部分。谓词用于刻划个体的性质、状态或个体间的关系，用大写字母表示。个体表示某个独立存在的事物或某个抽象的概念，用小写字母表示。联接词的优先级别按图中从上到下递减。量词包括全称量词任意、存在量词存在

![image-20250325021105681](../assets/post-pics/image-20250325021105681.png)

特点：

- 谓词表示法接近于自然语言的形式语言，易于理解和接受
- 适宜于精确性知识的表示，而不适宜于不确定性知识的表示
- 用谓词逻辑法表示的知识可以比较容易转换为计算机的内部形式，易于模块化，便于对知识的添加、删除和修改。

#### 时序逻辑表示法

将时间及其次序关系引入谓词表达式之中，利用谓词逻辑的概念和方法，便构成了时序逻辑知识模型。

#### 产生式表示法

又称为规则或产生式规则。通常用于表示具有因果关系的知识。基本形式为 if P then Q，或 P-->Q。

#### 语义网络表示法

通过概念及其语义关系来表达知识的一种网络图，由节点和连接节 点的弧构成。其基础是一种三元组结构(节点 1、弧、节点 2)。语义网络除可表达事实外，还可表达规则。一条产生式规则 R：IF A THEN B。当多个三元组综合在一起表达时，就可得到一个语义网络。

特点：

- 节点和弧便于显式表达结构、属性、因果关系，便于联想方式实现对系统的解释
- 继承方式符合人类的思维习惯
- 语义解释依赖于结构的推理过程，没有结构的约定，推理不能保证像谓词逻辑法那样有效
- 知识存储和检索过程比较复杂

语义网络表示法与谓词表示法的区别：

1. 语义网络的基本单元是节点，具有名词性质；谓词逻辑的基本单元是谓词和个体构成的动作，具有动词性质。
2. 语义网络中的联接关系靠弧实现，这种连接关系是有方向的，有上、下层概念之分，可以表达分类、从属、时空关系等不同关系；而谓词逻辑靠联接词建立关系，除了蕴含和双蕴含以外，关系表达中没有方向性，而蕴含和双蕴含也只能表达因果关系。
3. 语义网络是一种基于有向图的表示方式；谓词逻辑是一种基于语言的表示方式。

#### 框架知识表示法

框架表示法的特点

- 面向对象，适合表示大规模复杂知识，体现了人的自然思维方式；
- 可表达陈述性知识和过程性知识，便于知识的结合，综合表达能力强；
- 利用层次结构、继承关系，冗余少。

### 知识获取

人工智能或知识工程系统中，通过非自动方式或自动方式实现计算机从知识源获取知识的过程。知识源包括专家、书本、数据库和人的经验等。

非自动知识获取是指知识通过知识工程师和知识编辑器传授给知识库。知识编辑器是一类程序设计系统，包括语法检查、一致性检查、自动薄记、知识抽取等功能。全自动知识获取是让计算机直接从环境中获取全部信息。包括机器感知(主要是计算机视觉和听觉)、机器识别和机器学习等。

#### 学习系统基本模型

学习系统是指，一个系统能够从某个过程或环境的未知特征中学到有关信息，并且能把学到的信息用于未来的估计、分类、决策或控制，以便改进系统的性能。学习系统内在行为：获取知识、积累经验、发现规律学习系统外部表现：改进性能、适应环境、实现系统的自我完善。

#### 学习系统分类

机械式学习系统、类比学习系统、示例学习系统、发现式学习系统、指导学习系统

### 知识处理

运用知识的过程称为推理过程。推理是指依据一定的规则从已有的事实推出结论的过程。其中的规则称为控制策略。智能系统是以知识为基础的系统，它根据已有的知识和事实去求解当前的问题。也叫基于知识的推理。推理由程序实现，称为推理机。

#### 推理方式

演绎推理、归纳推理、非单调推理

#### 推理控制策略

正向推理(数据/事实驱动推理)、反向推理(目标驱动推理)、正反向混合推理

#### 状态空间的搜索策略

一般的搜索策略/搜索过程、盲目搜索(宽度/深度优先搜索)策略、启发式搜索策略。各搜索策略都用到了状态空间图，搜索方法的不同体现在结点在表中的排序不同，各种策略可以相结合。

![image-20250325023214725](../assets/post-pics/image-20250325023214725.png)

## 第三章 分层递阶控制

### 大系统的递阶结构

系统各个子系统的控制作用是由按照一定优先级和从属关系安排的决策单元实现的。同级的各决策单元可以同时平行工作并对下级施加作用，它们又要受到上级的干预，子系统可以通过上级互相交换信息。

多级多目标结构：当系统由若干个可分的相互关联的子系统组成时可将所有决策单元按一定支配关系递阶排列，同级各单元要受上一级的干预，同时又对下一级决策单元施加影响。同一级决策单元如有相互冲突的决策目标，由上级决策单元加以协调。

### 分层递阶控制的一般原理

基本原理是把一个总体问题 P 分解成有限数量的子问题 P。总体问题 P 的目标应使复杂系统的总体准则取得极值。各子系统没有关联是，子系统解的集合就是整个系统的解，各子系统产生冲突时，需要引入协调参数$$\lambda$$作为干预信号。协调就是要选择$$\lambda$$，从某个初值$$\lambda_0$$经过迭代达到终值$$\lambda^*$$从而使递阶控制达到最优。协调的两个原则为关联预测协调原则(考虑关联)和关联平衡协调原侧(不考虑关联约束)。

### 分层递阶控制系统的结构

由组织级、协调级和执行级组成，按照自上而下精度递增伴随智能递减的原则进行设计。三个级的功能作用各有侧重。

Boltzmann 机实现组织级功能；协调级有分派器、协调器、数据处理器、任务处理器、学习处理器，各个部件的功能作用各有侧重。执行级的特点。

## 第四章 遗传算法

遗传算法(Genetic Algorithm，GA)是基于自然选择和基因遗传学的搜索算法，通过复制、交叉和变异三种操作对待优化参数的编码串进行引导型搜索，使适配值高的个体被保留下来组成新的群体，直到满足一定的极限条件。

遗传算法具有以下特点：

- 能够在复杂空间进行全局最优搜索，且具有较强的鲁棒性
- 对于搜索空间(待寻优的函数)基本上不需要什么限制性的假设
- 从许多点开始并行操作，该机制和变异一起有效防止了收敛于局部最优解，且可通过大规模并行计算来提高计算速度
- 通过目标函数来计算适配值，对问题的依赖性小
- 寻优规则由概率决定而非确定

### 算法原理

简单遗传算法包含三个基本操作：复制、交叉和变异，以位串的方式进行处理。复制即按照适配值构成的比例产生下一代种群；交叉即将位串两辆配对并在随机位置往后处进行交换；变异即以极小的概率随机改变位串的某一位。算法流程为：产生初始种群、对各个体位串解码并计算适配值、按选择率复制处下一代、交叉和变异。

适应度函数用于评价解对问题的适应度，满足约束的解称为可行解，否则称为不可行解，理想的解是在满足约束的前提下使目标函数最优化的解，承称为最佳可行解。

### 模式理论

遗传算法的模式理论是一种解释遗传算法工作机理的理论。模式是描述种群中在位串的某些确定位置上具有相似性的位串子集的相似性模板，如 1\*0，对应的位串就有 100 和 110。高适配值与位串模式的这种相似性具有因果关系。

为了评估算法性能，需要估算一次迭代中有效处理的模式数量(只有能够较好保留并遗传到下一代的模式才对算法有实质贡献)，定义如下量以方便描述

- $$A(t)$$：$$t$$时刻的种群
- $$A_j$$：个体位串
- $$O(H)$$：模式位数，即模式所有的位数
- $$\delta(H)$$：模式的有效长度，即最两端确定位之间的距离
- $$l$$：位串长度
- $$m = m(H, t)$$：$$t$$时刻种群含有的模式数
- $$\bar{f}$$：种群的平均适配值(适配值即位串解码结果在待优化函数上的值)
- $$f(H)$$：种群中$$H$$模式个体的平均适配值
- $$P_d$$：模式被破坏的概率(实际死亡率)
- $$P_s$$：存活率阈值，人为给定
- $$P_c$$：发生交叉的概率
- $$P_m$$：单个位置发生变异的概率

综合考虑复制、交叉和变异对模式的影响，其中第一个式子的三部分分别为三个基本操作对模式的影响

$$
\begin{aligned}
m(H,t + 1) &\geqslant m(H,t)\frac{f(H)}{\bar{f}}\left[1 - P_{c}\frac{\delta(H)}{l - 1}\right]\left[1 - O(H)P_{m}\right]\\
&\approx m(H,t)\frac{f(H)}{\bar{f}}\left[1 - P_{c}\frac{\delta(H)}{l - 1}- O(H)P_{m}\right]
\end{aligned}
$$

经推导，对于$$n$$个位串的种群，可以合理估计总模式数的范围在

$$
\frac{l-l_s+1}{4}n^3 \leqslant n_s \leqslant n\cdot 2^{l_s - 1}\cdot(l - l_s + 1)
$$

由此可见，遗传算法处理模式数的数量级为$$O(n^3)$$，这就是遗传算法隐含的并行机制

### 算子的扩展性

经典 GA = 轮盘赌选择 + 单点交叉 + 均匀变异，轮盘赌的缺陷是缺乏精英机制，存在遗传漂移（有限种群下的基因丢失，导致不能以概率 1 收敛于全局最优），最优解可能被随机性抹杀。其它选择算子还有：截断选择、排序、锦标赛选择。

经典 GA 的改进：

- 精英保留策略：每一代都保留最佳个体，最佳个体（精英个体）直接进入下一代，精英个体也可以泛化
- 选择算子一——锦标赛选择/巡回赛选择：1-1 锦标赛选择，优胜劣汰，特点是不依赖于个体间适值的具体差异，且操作简单，不必执行比例选择中的适应度转换。
- 选择算子二——截断选择：全体大排名，前 n 名保留，其余淘汰。特点是选择方式与适值的具体差异无关，只与相对大小有关，需要采用排序操作

### 外围问题

1. 目标函数值到适配值的映射

   适配值非负，希望越大越好；目标函数值则没有限制，有如下三种常见的映射方式

   - 最小化问题：$$f(x)= \begin{cases} c_{\max}-g(x), & g(x)<c_{\max}\\ 0, & \text{其他} \end{cases}$$
   - 最大化问题：$$f(x)= \begin{cases} g(x)-c_{\min}, & g(x)-c_{\min}>0\\ 0, & \text{其他} \end{cases}$$
   - 指数函数映射：$$f(x) = c^{g(x)}$$

2. 适配值调整

   为了防止少数非凡个体导致过早收敛，以及防止平均适配值和最大适配值之间相差无几，需要对各位串的适配值进行调整，如线性调整$$f' = af+b$$，要求调整前后$$f$$的均值需要相等。

3. 编码原则

   遗传算法能工作的根本原因是能有效处理种群中的大量模式，因此要求编码方式中包含尽可能多的模式，经推导可得，二进制编码方案能取得最大的模式数。

4. 多参数级联定点映射编码

   为了在参数空间内进行编码，可以将特定区间$$[U_{min}, U_{max}]$$线性映射到$$[0, 2^l]$$中，这一映射代码的精度为

   $$
   \delta=\frac{U_{\max}-U_{\min}}{2^{i}-1}
   $$

   建立映射

   $$
   x_{i}=U_{\min}^{(i)}+U_{i}\delta_i
   $$

   最后将各编码级联拼接起来即可

### GA 求解问题的步骤

分为七个步骤

1. 解的表示：编解码
2. 种群初始化，生成初始种群，包括随机、构造、混合
3. 定义算子：选择、交叉、变异
4. 算法参数设置：初始化算法的控制参数，包括特征参数（种群规模$$PS$$、交叉概率$$P_c$$、变异概率$$P_m$$、编码长度$$l$$）和运行参数(最大进化代数MaxGen、最大函数评价次数MaxNFE)
5. 设置终止条件：最大计算代价，期望求解误差，连续无改进次数
6. 编程实现方式
7. 运行测试并改进

### 遗传算法的特点

- 寻优规则是由概率决定的，而非确定性的
- 是在解空间进行高效启发式搜索，而非盲目地举或完全随机搜索
- 是对参数的编码进行操作，而非对参数本身
- 计算过程无需梯度、曲率等微分信息，对问题依赖小，对寻优的函数基本无限制，具有很强的通用性
- 是从许多点开始并行操作，而非局限于一点，可防止收敛于局部最优
- 具有并行计算的特点，因而可通过大规模并行计算来提高计算速度
- 计算简单，容易实现

### 算法应用

系统辨识、方程求解、最优控制、博弈推理、组合优化、粒子群算法

## 第五章 神经网络控制



## 第六章 模糊控制

精确数学中，普通集合用特征函数来刻画，用精确的 0 和 1 来刻画一个元素是否属于一个集合，非此即彼；模糊集论中用隶属度函数$$\mu_A(x)$$表示$$x \in A$$的程度（$$\mu_A(x)$$取值范围在 0-1 之间），将其推广到属于的程度，对每一个元素有一个隶属度$$\mu_A$$表示元素属于的程度，是精确数学的一般化。

常见的隶属函数有：三角形、半角形、梯形、半梯形、钟形/正态形、矩形、Z 形、S 形、单点形等

模糊性和随机性是两个概念，模糊性是由于对象无精确定义造成的。因此对它的描述需要采用隶属函数。而随机性是在事件是否发生的不确定性中表现出来的不确定性，而事件本身的状态和类属是确定的。事件本身是模糊的，出现与不出现之间没有明确的分界线。事件本身没有明确定义，事件是否出现没有精确的判别准则。既有随机性又有模糊性，称为模糊随机事件。

### 模糊集合

集合是指具有某种属性的、确定的、彼此间可以区别的事物的全体。被考虑对象的所有元素的全体称为论域，每个对象称为元素或元。

定义：设$$X$$为论域，$$\mu_A$$为$$X$$上的一个实值函数来表示，即$$\mu_A:X \to [0, 1]$$，对于$$x \in X$$，称为$$\mu_A$$对模糊集合$$A$$的隶属度，而$$\mu_A(x)$$称为隶属度函数。

### 模糊集合表示法

有向量表示法，Zadeh 表示法和序偶表示法，核心都是将论域中的元素和它的隶属度对应起来，其中向量表示法由于按顺序只表示除了隶属度值而没有表示出论域中的元素，所以不能省略隶属度为 0 的元素

![image-20250325155429849](../assets/post-pics/image-20250325155429849.png)

### 模糊集合间的关系和运算

模糊集合的运算是对隶属度值进行操作

$$
\begin{aligned}
& \text{相等: } A = B \Leftrightarrow \mu_A(x) = \mu_B(x), \forall x \in X \\
& \text{包含: } A \subseteq B \Leftrightarrow \mu_A(x) \leqslant \mu_B(x), \forall x \in X \\
& \text{空集: } \varnothing: \mu_{\varnothing}(x) = 0, \forall x \in X \\
& \text{全集: } X: \mu_X(x) = 1, \forall x \in X \\
& \text{并集/加法: } \mu_{A \cup B}(x)=\mu_A(x)\vee\mu_B(x)
= \max(\mu_A(x), \mu_B(x)), \forall x \in X \\
& \text{交集/乘法: } \mu_{A \cap B}(x)=\mu_A(x)\wedge\mu_B(x)= \min(\mu_A(x), \mu_B(x)), \forall x \in X \\
& \text{补集: } \mu_{\overline{A}}(x) = 1 - \mu_A(x), \forall x \in X \\
& \text{代数积: } \mu_{A \cdot B}(x) = \mu_A(x) \cdot \mu_B(x), \forall x \in X \\
& \text{代数和: } \mu_{A + B}(x) = \mu_A(x) + \mu_B(x) - \mu_A(x) \cdot \mu_B(x), \forall x \in X \\
& \text{有界和: } \mu_{A \oplus B}(x)=(\mu_A(x) + \mu_B(x))\wedge 1
= \min(1, \mu_A(x) + \mu_B(x)), \forall x \in X \\
& \text{有界差: } \mu_{A \ominus B}(x)=(\mu_A(x) - \mu_B(x))\vee 0
= \max(0, \mu_A(x) - \mu_B(x)), \forall x \in X \\
& \text{有界积: } \mu_{A \odot B}(x)=(\mu_A(x) + \mu_B(x) - 1)\vee 0
 = \max(0, \mu_A(x) + \mu_B(x) - 1), \forall x \in X
\end{aligned}
$$

### 模糊关系

精确数学中，集合的笛卡尔积定义为，

代数积：隶属度值数值相乘

集合的笛卡尔积

一个模糊关系就是一个模糊集合

模糊推理：已知关系 R，由新的输入 X 求对应的 Y

A 是 U 的模糊集合 f(U)的子集，f 代表 fuzzyset
