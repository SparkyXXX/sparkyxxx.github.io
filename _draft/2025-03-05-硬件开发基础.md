---
title: 硬件开发基础
description: 以AD-嘉立创为载体的硬件开发基础
author: Hatrix
date: 2025-03-05 08:40:00 +0800
categories: [硬件开发]
tags: [实践技能]
math: true
mermaid: true
pin: false
image:
  path: ../assets/post-pics/Alinx_7010.jpg
  alt: Alinx 7010
---

## 基本流程

以 AD-嘉立创平台为例，从零开始到拿到一块板子的工作流一般为：

- 确定板子功能以及需要的元器件
- 在嘉立创等多个平台寻找需要的元器件及相应的可导出的 AD 文件(初学阶段一般不会自己画元件的原理图和封装，找现成的即可)
- 按一定的规范建立自己的元器件库(如果从零开始则建议执行这一步，有现成的可靠的库则可以跳过)
- 从元器件库中选择需要的元器件，绘制原理图，完成连线、位号标注和网络标签的添加等，最后 Validate
- 仔细检查原理图，并且最好能找不同的人审核(个人习惯，因为原理图的错误在 PCB 布局的时候基本不会有机会发现，并且即使在 PCB 布局时发现了错误，返回到原理图中修改，也多少会对已经完成的布局有所影响，徒增工作量，所以建议在进行 PCB 布局前仔细检查原理图)
- 确定板子外形，可从 SW 或 AutoCAD 中导入 dwg/dwf 文件，确定外框形状和孔位信息
- 根据制造厂商的工艺参数设置 DRC 规则
- 将原理图导入 PCB 中
- 进行层叠设计(2 层板以上需要执行这一步，否则跳过)
- 按功能模块大致确定元器件布局(可利用 AD 的“交叉选择”功能在原理图中选择某个功能模块，在 PCB 中会自动匹配相应的元器件)
- 对逐个功能模块进行器件摆放、打孔、布线等
- 根据需要进行铺铜
- 运行 DRC，解决警告和报错
- 在嘉立创完成 PCB 打样并购买元器件，或使用 SMT 服务，完成元器件匹配操作

## 建立规范

1. 元器件库

   - Designator：元件标识符，又称位号，在一张原理图中唯一；按照标准的元件类型前缀 + 流水号命名，显示。
   - Design Item ID：设计项标识，是元器件在原理图库中的名称，在整个项目中唯一，和 Comment 写一样。
   - Comment：注释，写型号或参数，电阻/电容/电感/接插件的不显示，其它的尤其是芯片要显示。
   - Description：描述，对元件功能、特性等进行说明。
   - Footprint：封装，定义了元件在 PCB 上的物理尺寸、引脚布局和焊接方式。按照标准封装(或商城中给的封装)填写名称。封装的参考统一设置为中心，另外 3D 模型放置要对准

   - 对于库的维护，把元器件库和 PCB 库放在集成库 LibPkg 中，集成库中的原理图和封装是一对一或一对多的关系，画原理图时放置一个元件后选择其封装即可。以一个常用元器件库为基础，后续项目中用到的芯片往里补充，以及实际调试中如果针对已有元件有封装不合适的地方往里更新。LibPkg 编译之后 Output 得到 IntLib，并安装到 AD 中，这样就不用在工程中包含库。所有芯片放一个库，使用时可以搜索找到需要的元器件。

2. 原理图

   - VCC 和 GND 从芯片外侧拉出来连接

   - 供电的标记为 VCC 3V3、VBUS 5V 等(网络标签名 + 供电电压)

   - 原理图的目的是看清楚，画开一些，分区域画并加上适当的注释

   - 用Text标注元器件参数

   - 捕捉栅格设置为10mil，兼顾吸附对齐和较小的可调粒度
3. PCB



## 经验教训

1. 

---

AD 基础和其它基础（梳理这个文档的结论和问题，看看视频和博客中的基础操作）

宇哥的工程学习（优秀板子学习）

数据手册读懂

- Net Labels：网络标签，用于标识具有相同电气连接的导线
- Visible Grid：可视栅格，默认设置为 10mil
- Snap Grid：捕捉栅格，设置为可视栅格的一半或四分之一

网路标签为什么一移动就会连不上？

单位：给过孔尺寸的时候用mm，其它时候都是mil？

Validate工程可以检查原理图的错误

Room是干嘛用的

分割平面

泪滴

fanout扇出一般用在BGA封装，就是软件自动给你从焊盘引出个线，顺便还可以加个过孔

推荐的好用设置，原理图优先项、PCB优先项

Net Classes，比如PWR，怎么在原理图这边设置，不然每次从原理图更新PCB，都会问我要不要Remove PWR。类的作用主要是为了应用不同的规则对吗？



1. PCB：

   ![image-20250309152352294](../assets/post-pics/image-20250309152352294.png)

   - Components：元器件

   - 3D Bodies：元器件的三维模型

   - Keepouts：禁止布线层对象

   - Tracks：铜膜导线，是 PCB 上电气连接的主要部分

   - Arcs：圆弧，可设置是否具有电气连接属性

   - Pads：焊盘，元器件引脚与 PCB 铜膜连接的金属部分，用于焊接元件引脚。有直插型焊盘和表贴型焊盘两种；直插型焊盘在 AD 中显示为灰色(Multi-Layer)。表贴型焊盘是元器件的一部分，一般不单独放置；直插型焊盘可以单独放置，中间有通孔，可以分别设置焊盘的尺寸和中间通孔的尺寸。直插型焊盘在设置设计规则时，需要考虑孔径与导线宽度、焊盘与周围其他对象的间距等规则，以确保电气性能和可制造性。表贴型焊盘主要关注焊盘与导线、焊盘之间的间距等规则，以及与元件引脚的匹配程度，同时要考虑焊锡膏印刷和回流焊接的工艺要求。直插型焊盘表面不能有阻焊油墨覆盖，这样才能保证与焊锡良好接触，实现焊接；过孔在某些工艺中可选择覆盖阻焊油墨(盖油)，防止过孔处短路或被氧化，也可不覆盖(开窗)，视具体设计要求而定。

   - Vias：过孔，用于不同 PCB 层之间的电气连接。可通过更改起始层和终止层来设置盲孔(将 PCB 内层走线与 PCB 表层走线相连，此孔不穿透整个板子)和埋孔(只连接内层之间的走线，处于 PCB 内层中，从 PCB 表面看不出来)。

   - Regions：区域，用于设计实心铜膜，一般用于大功率元器件底部散热，代替大电流走线；不区分其他对象，连接区域内的所有网络，只能存在一个网络，不然会造成短路。一般在在布线之前填充完成。支持绘制任意形状，可由其它图形转换而来，如可以先在 PCB 板的顶部丝印层绘制需要的图形，再转换为 Regions。

   - Fills：与 Regions 类似，唯一的区别是，Fills 只支持矩形，而 Regions 支持任意形状。

   - Polygons：多边形铺铜，一般用于大面积的电源或接地连接，增强电气性能，减少电磁干扰。也可用于屏蔽特定区域。区分不同对象，会自动连接相同网络并避开其他网络，一般在布线之后进行。

   - Texts：文本，包括元件标注、网络名称、说明文字等

   - Rooms：空间区域，用于定义一个局部元件集合摆放的相对关系，一个用途是可以为不同的 Room 设置不同的布局规则设置，比如线宽规则(使用规则查询语句 WithinRoom 来筛选 Room 对象)；另一个用途是具有多组相同布局布线的电路(Copy Rooms Formats)

多图纸设计：图纸包括两种结构关系，一种是层次式图纸，该连接关系是纵向的，也就是某一层次的图纸只能和相邻的上级或下级有关系；另一种是扁平式图纸，该连接关系是横向的，任何两张图纸之间都可以建立信号连接。Altium Designer 提供的网络标识有：Net Label，Port，Sheet Entry，Power Port，Off-sheet Connector，它们的共同点是：名称一致时均连接在一起。其中，"Port”和“Net Label”的作用范围是可以在 Options 中设置的。Net Label 作用范围为单页原理图，Port 和 Off-sheet Connector 均适用于跨页原理图，Power Port 忽略结构，都是连接在一起的。

PCB 中的各个层：板子从中间向外有 top 和 bottom 两个方向，以 top 为例，以两层版的工艺，按照从内向外的顺序有信号层 top layer，助焊层/锡膏层 top paste，阻焊层 top solder，丝印层 top overlay，底部方向同理，top layer 和 bottom layer 之间用 PP 片(半固化片 Prepreg)作绝缘介质层。对于层数高于两层的板子，在两个信号层 top layer 和 bottom layer 之间还有专门的底层和电源层。

PP 片在 PCB 制造中主要用于层间粘结与绝缘。在多层 PCB 生产中，它夹在不同的导电层(如内层铜箔线路层)之间，通过加热、加压等工艺固化后，能将各层紧密粘结在一起，同时保证各层之间有良好的绝缘性能，避免出现短路等电气故障。FR-4 是一种耐燃材料等级的代号，代表树脂材料经过燃烧状态必须能够自行熄灭的一种材料规格。它是由环氧树脂加上填充剂以及玻璃纤维所做出的复合材料，属于环氧玻璃布层压板。FR-4 是 PCB 使用的基板，具有较高的机械性能和介电性能，较好的耐热性和耐潮性，并有良好的机械加工性。PP 片是 FR-4 材料制造过程中的一个中间产物或组成部分，通过 PP 片的粘结作用，将玻璃纤维布和环氧树脂等材料结合在一起，最终形成具有良好性能的 FR-4 基板材料用于 PCB 制造。

![image-20250309203922773](../assets/post-pics/image-20250309203922773.png)

除此之外，还有 keep-out layer 或某一个 mechanical layer 用作规定板子外形(不要同时用)，其它的诸如 drill guide、drill drawing、以及各个 Mechanical 机械层均不常用，暂时可以忽略。

- top layer 和 bottom layer 为信号层，在 PCB 制造中为保留铜皮的部分，在该层布线、铺铜以及封装中对应焊盘位置的区域，在信号层中均代表在该层留有相应的铜皮

  ![image-20250318154002839](../assets/post-pics/image-20250318154002839.png)

- top paste 和 bottom paste 为助焊层，在 PCB 制造中为喷锡的部分，这一层由贴片型器件的封装决定，也就是所谓的焊盘，一般不手动修改。在元器件封装中，焊盘一般比信号层对应的铜皮区域略大或两者一样大。

  ![image-20250318155045897](../assets/post-pics/image-20250318155045897.png)

- top solder 和 bottom solder 为阻焊层，在 PCB 制造中为覆盖绿油的层(虽然也有其它颜色的阻焊油漆，但一般统称绿油)，该层为负片输出，也称阻焊开窗，即默认整层覆盖绿油，只在有开窗的位置不盖油，相当于在整层绿油的基础上作减法操作。由于阻焊层向内为助焊层或信号层，因此开窗的位置会露出相应的焊盘或其它铜皮。在元器件封装中，阻焊区域一般比对应的焊盘区域略大。

  ![image-20250318155506515](../assets/post-pics/image-20250318155506515.png)

3D 模型是和封装绑定的，可从嘉立创 EDA 中导出元件的 3D 模型，相对比较费时间，如有需要建议直接找现成的 3D 封装库。

## 注意事项

1. 直插型焊盘直径要略大于孔径，否则打孔会把焊盘打掉。焊盘不起作用，可能在拧螺丝固定时导致上下层铜皮短路。焊盘是带有网络的，孔壁也是金属。
2. 避免直角走线，直角处线宽突变为原来的根号二倍，且直角走线的反射较为严重。
3.层叠设计？Signal？

## 设计规范

## 软件界面说明

## 软件操作说明

原理图库可以更新到原理图，PCB 库可以更新到 PCB，原理图和 PCB 可以相互更新改动

Gerber 光绘文件胶片？

走线宽度和线距一样，线到孔的距离在此基础上大些

打孔在 PCB 设计中究竟有什么影响和作用？

铜厚一般用 1oz 即可，2oz 只有在做对散热要求较高的电源中才会使用，另外也可以用 1oz 铜然后阻焊层开窗往上堆锡。1oz 约为 35 微米，定义为把 1oz 重(约 28.35g)、密度为 8.9g/cm³ 的纯铜平铺到 1 平方英尺(约 929.03 平方厘米)的面积上所形成的厚度 1。

器件摆放主要由板间连接关系和信号流向决定

弯曲的走线是为了走线等长，在高速 PCB 中需要考虑这一点。比如几个 G 的信号如果走线不等长，那到达的时间就不一样从而产生误判

四层板几乎不需要层叠设计，六层板及以上需要考虑这一点：一般有一个不分割的整个的地，第四层是信号层，第五层是电源层，电源层也尽量不分割，如果有别的电源就想办法绕，第六层也是信号层。最佳信号层是第一层和第三层，次佳信号层是第四层和第六层

细线过不了大电流的制约因素主要是压降和温升(导线就是电阻)

USB 和 CAN 走差分线

shift+s 灰度化其它层；显示上 Tracks 30%，Polygons 70%

10mil = 0.254mm

对于 10mil 的走线，1A 的电流产生 19.6mV/cm 的压降，温升约 10℃

1A 的电流至少 10mil，建议 15mil；2A 的电流至少 20mil，建议 30mil；3A 的电流至少 60mil，建议 100mil，大于 3A 建议铺铜或开窗

小于 10mil 线宽，建议电流小于 0.1A

可用数方格的方法计算走线电阻，铜厚 1oz 时，一个导线方格的电阻额约为 0.5mΩ，且与方格边长无关，该方法是通过铜的电阻率算出来的，对细长导线的计算非常准。

盘中孔工艺是指在焊盘上打孔，但通过镀铜的方式将过孔隐藏在内部，确保表面焊接强度和机械强度可靠。在复杂的高层板设计中，在允许焊盘上打孔可以降低 layout 难度，节约时间，优化信号质量

阻抗匹配是高速 pcb 设计中的重要概念，以标准的通信模型为例，当信号在信号源、传输线、接收端三个部分传输时，如果相邻部分的阻抗不一致，就会在接触点处发生反射，不一致的程度越高，反射的现象就越强烈。所谓的阻抗匹配，就是要保证三个部分的阻抗一致。信号源和接收端的阻抗可以在相应的数据手册中找到，因此设计 PCB 走线的阻抗即可(如果信号源)；例如 USB 阻抗是差分 90Ω，SDIO 是单端 50Ω。PCB 板厂会有专门的阻抗计算的页面，输入需求阻抗、阻抗模式、阻抗层等信息就可以自动计算得到在该厂家的工艺下，任意阻抗所对应的走线宽度，在设计时设置相应的宽度，并在走线的反面画一个参考用的地平面即可。另外注意，阻抗与走线长度无关，但是和其它参数都有关，比如 PCB 厚度、层数、铜厚，甚至是厂家的生产工艺

![image-20250318170908046](../assets/post-pics/image-20250318170908046.png)

沉金工艺是什么

SMA 接头是什么

---

PCB 设计分为原理图和 PCB 部分，目前以 Altium Designer 为载体记录笔记。

焊接完成后，用万用表测一遍所有电压输入输出对地有没有短路

32.768kHz 的 RTC 晶振删掉，改孔径，四边形走线

MCU 有虚焊，贴上了但是没焊上；引脚掰弯

阻容摆正了再焊，补锡使得含焊点圆润

晶振虚焊，可以所有引脚都翘起来焊

外壳短路，贴布基胶

LDO 输出偏低，芯片坏；滤波电容选大一点；LDO 原理

测通断分析哪里断了

栈擎开发板的正插 USB 反插 UART 是这样实现的

![image-20250526223413019](../assets/post-pics/image-20250526223413019.png)

## 原理图规范

1. 创建一个器件的原理图包括：元件边框、管脚(顺序和名称)、位号名称、说明。管脚序号和实物通过封装一一对应
2. 元器件命名：电阻 R、电容 C、电感 L、二极管(包括 LED)D、接插件 J、晶振 X、三极管 Q、芯片 U、按键开关 S、变压器 T，保险丝 F
3. 芯片的 Design Item ID 和 Comment 写芯片型号；电阻电容的 Design Item ID 写 RES/CAP+封装形式，Comment 不写(在原理图中以文本的形式标注阻值/容值)；排针 Design Item ID 和 Commen 写 HEADER m×n，Comment 写，Designator 写位号命名，Description 写器件功能
4. 引脚类型根据器件引脚功能写，在具有复用功能的引脚上要求比较高(如单片机引脚)
5. VCC 和 GND 不能直接连到电路引脚上，要通过连线连接
6. 引脚过多的芯片分 bank
7. 芯片引脚左右排布，上下不要有引脚，默认引脚朝右朝下
8. 原理图要按功能分区
9. 片子引脚的位号和名称都显示，位号放引脚上，名称放片子内；通用元器件位号和名称都不显示。引脚颜色黑色，通用元件颜色蓝色，通用元器件管脚长度 100mil，芯片和排针管脚长度 300mil，矩形中心与坐标原点对齐

## PCB 规范

1. 根据制作厂家的工艺参数设置规则，且最好留点余量

2. 一个完整的封装包括焊盘、管脚序号、丝印(表示实物的大致范围)、阻焊、1 脚标识

3. 常用封装：0805、0402、0603

4. 电容靠近信号源头放，因其对信号滤波的作用范围有限；电阻除了阻容共串(一起才能发挥作用)外，位置无所谓。(去耦电容)

5. 信号线一般在 10mil 就可以，对于电源线，对过孔尺寸的内外径、电源线线宽宽都有要求，根据多大面积能过多大电流(留点余量)，计算过孔内外径并根据铜皮厚度计算线宽

6. 不要有短段的弯线，曲率（泪滴走线）

7. 不要直角走线，信号反射对信号质量有影响

8. 一个孔不出两根线

9. 信号线不要走过孔，只有电源线或者 GPIO 这样只分高低电平的非信号线才可以走过孔

10. 铺铜的原则：面积尽可能大、不要有铜皮尖角、很细的铜以及孤铜、芯片底下不铺铜；高层板的铺铜接地

11. 铺铜之后要切割工整

12. 板子周围打细小小孔(过孔)可以抗外界干扰

13. 焊盘上不打孔，过孔打在焊盘上容易机焊元件放歪以及容易漏锡虚焊，非要打用盘中孔工艺

14. 时钟线等长以获得更高的精度，时钟电路可以看看数据手册中的推荐电路和布局

15. 电源芯片一定要看看推荐布局，而且要做电源树，好几路之间的铺铜距离要比一般线路之间的更大些

16. 对于常规板，过孔(用于板子内部走线的)推荐盖油(tended)，盖油之后的过孔上可以放丝印

17. 扇孔通俗理解就是拉线打过孔，多层板走线就近打孔，可以缩短回流路径减少干扰。差分信号换层时，其换层过孔附近必须添加 GND 过孔，保证其回流路径短。

18. 过孔类型及设计数量应考虑其载流能力。为保证设计余量，有空间会按计算的 2 倍数量处理。

    过孔扇出要考虑其间距，要求 2 个过孔之间保证能过一根信号线，防止过孔破坏地与电源的完整性。2 个过孔之间的中心间距建议在 1mm 以上(39.37mil)

    板边须沿着板框内缩的位置，打一圈 GND 过孔，过孔与过孔的距离在 50-200mil 左右

19. 电源走线可以多边形铺铜覆盖，全连接铺铜

20. 信号线能不打孔就不打孔，电源能打孔就打孔

21. 丝印的目的是手工焊接时的区分和定位，标明位号即可，一般只显示丝印和开窗层 Solder 即可。丝印位号不上阻焊，方向不超过两个(规定为字母在左和字母在下)。丝印大小根据元器件密集程度，规范为 4/25mil(高密度)、5/30mil(中密度)、6/45mil(低密度)，丝印字体用 Sans Serif

## 元件购买

CMOS：索尼(更好)、OV

电源芯片：TI 德州仪器、MPS

通用元器件：云汉芯城、贸泽电子、得捷电子

接插件：TE 泰科

电阻电容：MURATA、YAGEO

电容一般都用陶瓷电容，容差选 1%或 0.1%，15ppm

板型材料一般选 FR-4，板厚 1.6mm，经常接触选无铅喷漆

## 规则设置

![image-20250526223426091](../assets/post-pics/image-20250526223426091.png)

间距 6mil，信号线宽 6mil，电源线宽 15mil，最小孔径 12mil，过孔经验公式：外径=2\*内径+-2mil，反焊盘间距 8mil，丝印与阻焊间距 2mil(在生产规则中)，焊盘到绿油的距离。建议单边 2.5mil。20mil 走 1A 电流，PWM 走线适当加粗，10~15mil，丝印间距 2mil。负片层过孔全连接，反焊盘间距 9~12mil，一般正片层通孔焊盘(DIP)和 SMD 焊盘十字连接，过孔全连接；需要过大电流另行考虑.孔间距 12mil 以上否则容易崩孔。最小阻焊桥宽度(MinimumSolderMaskSliver)4mil，丝印与阻焊间距 3.5mil 以上，丝印间距 4mil 以上

过孔规则设置后需要 tp 进入默认设置，改过孔对应的默认设置

设置完规则后要检查 DRC 检查中是否运行这一项

### 嘉立创打板规则

[嘉立创工艺参数](https://www.jlc.com/portal/vtechnology.html?spm=PCB.Homepage.functionbar.1015)

下单默认：FR-4 板材，成品板厚 1.6mm，外层铜厚 1 盎司，绿色阻焊白色丝印，过孔盖油，，焊盘有铅喷漆，最小孔径/外径 0.3mm(0.4/0.45)(0.45 代表加阻焊一起的)

## 软件操作

**快捷键**

1. 画板子前先 windows + space 切换成美式键盘
2. dsd 从选中边框重定义板框大小
3. ctrl + m 测量
4. eos 设置原点
5. tve 从选中边框创建区域(填充)
6. tvt 从选中边框创建非铺铜区域(创建后将边框删除)，也可放置多边形铺铜挖空区域
7. tvb 从选中边框板框切孔
8. tvm 从选中边框创建 ROOM
9. ctrl + w 或 f2 布线
10. ctrl + c 复制先要选择位置，ctrl + v 是带位置粘贴的
11. ctrl 拖动线进行调整，解决 DRC 并尽量使布线均匀
12. te 泪滴
13. tgm 铺铜管理器
14. tga 全部重新铺铜，所有铺铜确定后删除铺铜挖空区域
15. dr 设置 DRC 规则
16. td 运行 DRC 规则检查
17. vb 翻转板子
18. L 切换层
19. shift + s 单层显示
20. f6 矩形排列所选择器件
21. 6 线选
22. 7 无障碍框选
23. 小键盘 8246 上下左右对其
24. 小键盘 79 水平垂直等间距
25. 小键盘 5 定位文本位置
26. q 转换单位
27. f3 放置过孔
28. f4 多边形铺铜
29. sc 选择连接的整条线
30. sn 网络选择
31. ctrl + h 或 sp 选择物理连接一起的
32. tm 复位错误
33. tc 从 PCB 中查找对应的原理图
34. shift + r 切换忽略 / 围绕障碍物走线
35. ctrl + 点击线路可以高亮某一条线，ctrl + 点击其它地方取消高亮
36. 多根走线
37. 捕捉栅格(调整栅格大小)V+G+S(快捷键)
38. Designator(元器件位号)
39. Comment(表示元器件属性的大小)
40. Description(备注)
41. 英文模式下 → 按“G”键可以切换网络(Grid)大小，双击“G”可以自定义网格大小。
42. PCB 中布线按 TAB 键可以设置线的宽度大小。
43. 按住 shift 多选，
44. ctrl+c 会先确定复制中心，粘贴时是带位置的
45. 可以导入 dxf/dwg，导出 dxf/dwg，step
46. Gerber 是一种光绘文件格式
47. imperial 英制单位，metric 公制单位
48. 焊盘和过孔
49. 每次都要取消勾选添加 add room 和 remove class？
50. ROOM 用于有 N 个相同的模块布局布线？
51. 3D 模型只有焊盘，可以加上器件模型
52. 视图选项卡中的板子规划模式用于规定板子大小，挖槽等等
53. 原理图界面 ctrl+L 的板级注释是什么？
54. tp 打开首选项，都是什么，推荐的首选项设置
55. 每个规则都是什么，drc 中的在线和批量是什么
56. report options 中的这几个都是什么

![image-20250526223447441](../assets/post-pics/image-20250526223447441.png)

1. 使用在线 DRC 时，在设计过程中只要出现违反规则的操作，比如线宽设置小于规定值、元件间距不足等，软件会马上给出提示，方便设计者及时发现并修正问题；关闭在线 DRC 后，设计过程中不会实时提示错误，只有后续手动运行批量 DRC 检查时，才会显示违反规则的地方
2. 十字铺铜和全包围铺铜的差别(下面好像有)
3. 有时候需要在一个器件两端设置同一个网络：按住 shift 键分别点选两个相同网络的焊盘，在选中状态下打开 properties，找到 Jumper 改成 1(jumper 是跳线吗，AD 中的跳线有什么用，跳线不是调试临时用的吗？)
4. 大厂的 PCB 设计
5. **xSignals 使用**
6. 导入导出层叠结构
7. **PDN PCB 电源分析**
8. 三个栅格都是什么？

![image-20250526223457588](../assets/post-pics/image-20250526223457588.png)

1. Validate 工程怎么用
2. 显示差异、版本控制、本地历史
3. 这里前两个按钮就是用于选择过滤器和选择用于捕捉的对象的，两个有什么差别？

![image-20250526223503560](../assets/post-pics/image-20250526223503560.png)

1. 鼠标右键和 esc 的作用一样
2. sl 可以线选

![image-20250526223511717](../assets/post-pics/image-20250526223511717.png)

1. 裁剪多边形铺铜怎么用，是不是可以用来把铜裁整齐？
2. 可以放置尺寸
3. 多看看优秀的板子
4. 用 AD 导出 BOM 还是嘉立创导出 BOM？

![image-20250526223520915](../assets/post-pics/image-20250526223520915.png)

**其它操作**

1. 要操作哪层先选中哪层，否则选不中该层对象
2. 先确定机械尺寸，绘制 keepout 并选中外框后 dsd(设计 → 板子形状 → 按照所选对象定义)确定板框大小
3. 可用工具 → 交叉选择模式并垂直分屏，框选原理图中的元件来同步选择 PCB 中的元件，F6(工具 → 器件摆放 → 在矩形区域内摆放)来大致规划模块的摆放位置，然后再 layout(布线)
4. 常见导入 PCB 报错的解决方法：(1)unknown footprint : 添加封装(2)unknown pin : 检查封装名称填写是否正确，以及该名称在 PCB 库中是否有对应的封装，PCB 封装的管脚号是否匹配上，位号是否和原理图匹配，封装中是否含有隐藏的管脚
5. 原理图中工具 → 标注 → 原理图标注可自动编辑位号
6. 原理图界面 Update 和 PCB 界面 Import 都可以将原理图的更改同步到 PCB；在库界面右键元件或在图界面选择工具中的从库更新，可将库的改动更新到图中
7. 工具中的转换可以生成和打散联合
8. 布线时退格可以取消上一步走线
9. 选中文字/器件并查找相似对象可以选中所有文字/器件。全选文字可以编辑文字高度和宽度来批量修改文字大小，全选器件可以 ap 批量修改器件文本位置(标识符 Designator 和注释 Comment，Comment 写芯片型号或者元件参数)
10. 原理图中放置网络(电气连接点在左下角)以分模块设计
11. 取消不必要的 DRC(Design Rule Check)检查，只留电气性能检查
12. 原理图和 PCB 中拖动状态下空格键可以旋转选中的元器件
13. 右下角 Panels→PCB 可管理类，可以显示/隐藏飞线，更改连线颜色
14. 可以通过查询构建器的过滤，针对网络、类、层创建新规则；并可以设置规则的优先级(数字越小优先级越高)以及是否使能
15. 大致布局完成之后可以对齐和等间距进行美化
16. 器件大于 0805 封装的，建议采用十字连接处理。大面积铺铜的通孔焊盘一般采用十字连接处理，特别是对于多层板的 GND 网络通孔管脚，防止焊接时散热过快导致焊接不良。
17. 可以使用过滤器灵活确定筛选范围
18. 未连接的飞线运行 DRC 后有 Un-routed 的提示
19. 调整丝印前先查找相似并锁定所有器件，调整丝印后还需要再运行一次 DRC
20. logo 导入后创建联合，并可以调整联合大小

## 杂项补充

1. 1mm=39.37mil，1Oz(盎司)= 28.35g；1Oz 意思是重量 1Oz 的铜均匀平铺在 1 平方英尺(FT2)的面积上所达到的厚度。它是用单位面积的重量来表示铜箔的平均厚度。
2. 正片层走线是铜；负片层走线是去铜，可绘制闭合区域进行分割
3. 网络名称相同的相通，走线并添加孔位可以与其它层连接
4. 高速板和低速板的布局原则完全不同，大致可以以 700Mbps 为界
5. 通孔焊盘用于直插件，用于与外界元件的连接；过孔用于层间线路连接，用于板子内部连接
6. 高速板要做阻抗匹配，根据所选板基厚度和材质，由严格的计算公式得出铜皮厚度
7. 板子层数根据线的总量确定，没有确定的标准；非要说的话，四层板价格稍高、设计布线稍容易、信号质量稍好
8. 板子从里到外分别是铜，阻焊，丝印
9. 泪滴类似于机械设计中打圆角的作用
10. 贴片器件间距，同类器件大于等于 0.3mm，不同类器件大于等于 0.3+0.13× 周围元件最大高度差。手工焊接大于等于 1.5mm，直插器件和贴片间距保持 1-3mm 方便焊接
11. ROOM 的作用：不同 ROOM 之间可以通过规则查询语句使用不同的布线规则，以及多通道时可以以 ROOM 为单位设计布线规则
12. 铺铜十字连接的作用的防止热胀冷缩时，热了使焊盘鼓起，冷了使连接断裂。十字连接时需要考虑载流能力。焊盘可以考虑采用十字连接，过孔一般都全连接。
13. 扇出/扇孔是多层板设计中在 layout 前提前从焊盘中心引出线打过孔便于走线的操作
14. BGA 指球栅阵列结构的 PCB，是集成电路采用有机载板的一种封装法，在 PCB 内部通过位于组件底部的一系列小焊球实现 IC 之间的连接。BGA 封装具有大量的输入和输出连接。有 BGA 的 PCB 板一般小孔较多；通常 BGA 下过孔设计为成品孔，直径 8~12mil；BGA 下过孔需塞孔，焊盘不允许上油墨，且焊盘上不钻孔。BGA 间距定义为从中心到中心测量的两个相邻焊球之间的距离。随着引脚数量的增加，元件的间距会减小。这种间距的减小使扇出变得复杂。因此，应该添加更多的内部层来布线引脚，这反过来又会增加 PCB 制造的成本。由于这些原因，决定所需的层数是一个比较困难的工作。有一个经验公式可以用来决定层数：层数=BGA 芯片信号总数/(4 面 x 每面 BGA 走线信号)

先确定板框大小，确定布局，然后再画每个部分

上传 PCB 文件到嘉立创会自动匹配坐标定位文件，匹配元器件时注意核对，有较小概率匹配漏选。

也可以自己上传 BOM 和坐标文件(BOM 文件在 PCB 文件下文件-->制造输出-->Gerber Files；坐标文件在 PCB 文件下文件-->装配输出-->Generates pick and place files，需要一定的设置调整成嘉立创的格式)

## 修改建议

泪滴

板子和3D元件的原点？	

位号图是用来显示丝印位置的

内八外十 mil 的过孔载流能力可以吗？

晶振是不是不打孔好？

Room的作用？

## TODO

1. 学习层叠设计
2. 常见元器件的种类，电容的温度系数的三个字母简称的标准
3. 学习宇哥双目摄像头板子工程里的规范

学习：(重点看手机传感器和安防传感器，留意网页和数据手册中各个参数以及缩写的含义，ppt 汇报所学，多做笔记，留个 github 仓库，以供同组哥们查询；顺带看一下片子支持的协议，即主控怎么拿到数据，再硬件做出来之后看看基础的处理算法)(选的时候尽量不选带 ISP 的片子，并着重关注视场角)(还需要了解的基础知识：相机的型号、CMOS 尺寸、基础的知识，ISP，图像预处理模块基础知识，CMOS 传感器基础，FPGA)

数据手册结构：

1. features 特性
2. general description 概览
3. absolute max ratings 极限指标
4. specification 指标(包括图表)
5. pin configuration 引脚分配
6. 内部寄存器或协议说明
7. application information 应用信息
8. package and other information 封装和订购信息

学习阶段看 12，器件选型看 148，电路设计看 578，程序设计看 6，机械设计看 8

![image-20250526223544350](../assets/post-pics/image-20250526223544350.png)

晶振工作原理

![image-20250526223602001](../assets/post-pics/image-20250526223602001.png)

晶振的核心是具有压电效应的石英晶体，最常见的驱动电路是皮尔斯振荡电路(一种并联型振荡电路)，在 MCU 中，图中的上半部分被集成在芯片内部，外部接入晶振即可，反相器兼具放大信号的作用，输出端能输出稳定的频率。电路依靠振荡电路才可工作，该电路靠上电时对噪声的频率选择，放大谐振频率，产生 CPU 时钟源

焊锡丝选择：Sn60%Pb40%左右

画板子：按步骤整理注意事项和操作(原理图设计、器件选型、布局层叠、扇孔打孔、布线、铺铜修铜、DRC)

https://blog.csdn.net/li391402/article/details/104407298

https://blog.csdn.net/sky_Buddha/article/details/105285363

## 经验

1. 接口的 pin 不要对反，如果真的 pin 反了，像 FPC 这样有正序和反序线的可以换线解决

2. 对于 VCC、GND、开关的状态，要加上丝印方便调试

3. 买元器件的时候要注意，对于与焊盘接触面几乎全部压在元器件下面的情况，再设计 pcb 时可以适当外扩焊盘

   这个红圈部分实际焊接时非常难焊，几乎是相当于将整个元器件悬空架起来焊成立体的才能保证机械焊点稳定无虚焊

4. 可以用手机开闪光灯放大检查焊点情况，焊盘如果是光的多半就是虚焊

5. 元器件焊盘的锡要补圆，要饱满才可以最大程度减小虚焊的隐患

6. 阻容 LED 等等这些比较小的器件，要左右两端都用电络铁点一下，一方面是为了补圆焊盘，另一方面可以检验虚焊

7. VCC 如果没有特别的需要，不要整层都铺铜，线连起来或者局部铺铜就行

8. 用来拧螺丝的过孔要连到 GND 网络上

9. 电源的滤波电容要放得离电源近些才有作用

10. 注意检查三脚开关的连线，别出现 VCC 和 GND 直连的状态了

11. 引脚密集的芯片焊接，先给一小边上很多的锡，用镊子小心夹住并调整方位摆正，注意不要夹伤引脚，定位之后。上助焊剂怼锡丝；对于连在一起的，用络铁头向上慢慢挑走

12. 出问题时要测量电压源(电池、稳压芯片等)的输出

13. 多检查芯片是不是引脚虚焊或者连着了

14. 加热过的焊油可能引起虚焊，在进行二次焊接前最好用洗板水清理干净

**记得反思修改几块板子获得的经验**

数字电源比模拟电源更敏感；数字部分和模拟部分只在总电源的地处用0欧电阻单端接地；其余部分各接各的

地铜可以多铺、按块儿铺，尽量不要很不规则；VCC一般都不会整层铺；更何况还有时需要分不同电源域

排布元器件的时候就要考虑到VCC连接

打过孔有助于抗干扰

丝印大小和辅助性说明，帮助调试

排针排母和多pin接口建议用丝印标

注每个角的功能，开关用丝印标注功能（Reset、BOOT等）；SMT的板子可以在丝印中去掉位号

分块铺铜？

弯的track？

晶振的周围打GND孔

学习优秀的板子为什么这么画，搞懂原理

画板子需要的理论知识
